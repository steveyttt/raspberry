<!--Up to setp 7 on here:-->
<!--https://www.raspberrypi.org/learning/poo-near-you/worksheet2/-->
<html>
    <head>
        <title>My map</title>
    </head>

    <script src="http://code.jquery.com/jquery-latest.js"></script>

    <style>
        #map {
            width: 100%;
            height: 400px;
            background-color: grey;
        }
    </style>
    <body>
        My Google map
        <div id="map"></div>
        <script>

            function initMap() {
                var Nottingham = {lat: 52.967938, lng: -1.158419};
                var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 10,
                center: Nottingham
            });

        var geocoder = new google.maps.Geocoder();
        var data_file = "http://localhost:8000/penalties.json";

        $.getJSON(data_file, function(data){
            $.each(data, function(i){
                var incident_location =  data[i]["Street"] + ", Nottingham, UK";
            });
        });

        var emoji = 'poop.png';

        geocoder.geocode( { 'address': incident_location }, function(results) {

        var marker = new google.maps.Marker({
            map: map,
            position: results[0].geometry.location,
            animation: google.maps.Animation.DROP,
            icon: emoji
        });

    });

}

        </script>

        <script async defer
            src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDS4Dm84jtFrM01hJv4dTPYqGtA4i96hVA&callback=initMap">
        </script>
    </body>
</html>